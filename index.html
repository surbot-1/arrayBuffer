<!DOCTYPE html>
<html lang=”en”>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
</head>

  
<body>
  
  <img id="elephant" src="">
  
<img id="image1" src="apple-icon.png">
<input type="file" name="file" id="file">
<input type="text" placeholder="Text" id="textField">
<button onclick = "abc()"> Button </button>
<button onclick = "abc2()"> Button </button>
<button onclick = "abc3()"> Button </button>
<button onclick = "abc4()"> Button </button>
  <button onclick = "abc5()"> Button </button>
<button onclick="copy()">Copy</button>
<!-- <img id="image2" src="apple-icon.png"> -->
<canvas id="canvas"></canvas>
<canvas id="canvas1" width="800" height="400" style="border:1px solid #d3d3d3;"></canvas>
<canvas id="myCanvas" width="300" height="150" style="border:1px solid #d3d3d3;"></canvas>
<div id="div1"> </div>
<div id="div2"> </div>
<div id="div3"> </div>
  <div id="div4"> </div>
  <div id="div5"> </div>
  <div id="div6"> </div>
  

<script>
  alert('1');
var myImage = new Image();
myImage.src = 'canvas_moon.png';
document.getElementById("div1").appendChild(myImage);
  
  
  var canvas1  = document.getElementById("canvas1");
  var context1 = canvas1.getContext('2d');

  var img1 = new Image();
        img1.src = 'apple-icon-32.png';
        img1.onload = function (e)
        {
            context1.drawImage(img1, 10, 10, 32, 32);
       // }
       var reader1 = new FileReader();
       reader1.onload = function (evt) {
       var view1 = new Uint8Array(evt.target.result) ;
       document.getElementById("div2").innerHTML += "<br>"+view1 ;
        } ;
        reader1.raedasArrayBuffer(img1);
  }
</script>
  
<script>
  alert('4');
  var d1, d2, d3, d4, d5, d6;
  function abc() {
  
 
    
  var file = document.getElementById("file").files[0] ;
  var reader = new FileReader();
      reader.onload = function(evt) {
      var buffer = evt.target.result ;  d1 = evt.target.result ;
     // var buffer = new arrayBuffer(512);
      var view = new Uint8Array(buffer) ;   d2 = new Uint8ClampedArray(d1);
     // document.getElementById("div2").innerHTML += evt.target.result ;
      document.getElementById("div2").innerHTML += "<br>" + view ;
      document.getElementById("div2").innerHTML += "<br>" + d2 ;
      };
  reader.readAsArrayBuffer(file);
    
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const arr = new Uint8ClampedArray(40000);

// Iterate through every pixel
for (let i = 0; i < arr.length; i += 4) {
  arr[i + 0] = 0;    // R value
  arr[i + 1] = 190;  // G value
  arr[i + 2] = 0;    // B value
  arr[i + 3] = 255;  // A value
}

// Initialize a new ImageData object
//  let imageData = new ImageData(arr, 200);
 let imageData = new ImageData(arr, 200) 
    
// Draw image data to the canvas
 ctx.putImageData(imageData, 20, 20);
// ctx.putImageData(imgData, 10, 10);
  
} 

</script>
  
<script>
  alert('5');
function abc2() {
  var canvas = document.getElementById('myCanvas');
  var ctx = canvas.getContext('2d'); d3 = ctx;
  var imageData = ctx.createImageData(100, 100); 
  var i;
  for ( i = 0; i < imageData.data.length; i += 4) {
      imageData.data[i + 0] = 255;    // R value
      imageData.data[i + 1] = 0;  // G value
      imageData.data[i + 2] = 0;    // B value
      imageData.data[i + 3] = 255;  // A value
      }
     ctx.putImageData(imageData, 10, 10);
     document.getElementById("div2").innerHTML += "<br>" + imageData.data ;
     
  }
  
  
 function copy() { ctx=d3;
         var imgData = ctx.getImageData(10, 10, 20, 20);
         ctx.putImageData(imgData, 200, 10);
         }
 
  
</script>
  
  
  
<script>

  alert('8');
  function abc3() {
  
 
  var dataBuf, data;
  var file = document.getElementById("file").files[0] ;
  var reader = new FileReader();
      reader.onload = function(evt) {
      var buffer = evt.target.result ;      dataBuf = evt.target.result ;
     // var buffer = new arrayBuffer(512);
      var view = new Uint8Array(buffer) ;   data = new Uint8Array (dataBuf) ;
     // document.getElementById("div2").innerHTML += evt.target.result ;
      document.getElementById("div2").innerHTML += "<br>" + view ;
     // document.getElementById("div2").innerHTML += "<br>" + d2 ;
      for (let i=0; i<256; i++) {
           document.getElementById("div3").innerHTML += "<br>" + i + " " + view[i] ;
           }
     // };
 // reader.readAsArrayBuffer(file);
  
            var canvas = document.getElementById('canvas1');
            var ctx = canvas.getContext('2d'); 
             
                 /* var img3 = new Image();
                  img3.src = 'apple-icon-32.png';
                  img3.onload = function (e)
                      {
                      ctx.drawImage(img3, 110, 10, 32, 32);
                      
                      var imgData3 = ctx.getImageData(10, 10, 32, 32);
                      ctx.putImageData(imgData3, 210, 10);
                      document.getElementById("div2").innerHTML += "<br>" + imgData3.data ;
                      }  */
                    
            var imageData = ctx.createImageData(32, 32); 
            var i;
            for ( i = 0; i < 32*4*32; i += 4) {
                imageData.data[i + 0] = data[i + data[10]+2] ;  // 255;    // R value
                imageData.data[i + 1] = data[i + data[10]+1] ;  // 0;  // G value
                imageData.data[i + 2] = data[i + data[10]] ;  // 0;    // B value
                imageData.data[i + 3] = data[i + data[10]+3] ;  //  255;  // A value
                }
            ctx.putImageData(imageData, 310, 10);
            document.getElementById("div2").innerHTML += "<br>" + imageData.data ;
     
       };
      reader.readAsArrayBuffer(file);
    
   }        
        
    

</script>

  
<script>
  
            alert('9');
     function abc4() {
            var cvs4 = document.getElementById('canvas1');
            var ctx4 = cvs4.getContext('2d'); 
            // var data4;
                  var img4 = new Image();
                  img4.src = 'Turbo-Snail-icon.png';
                  img4.onload = function (e4)
                      {
                      ctx4.drawImage(img4, 110, 10, 32, 32);
                      // var dataURL = cvs4.toDataURL();
                      var imgData4 = ctx4.getImageData(110, 10, 32, 32);
                      ctx4.putImageData(imgData4, 210, 10);
                      document.getElementById("div2").innerHTML += "<br>" + img4.naturalWidth +" "+ img4.naturalHeight +" "+ img4.sizes ;
                      document.getElementById("div2").innerHTML += "<br>" + imgData4.data ;
                      // document.getElementById("div2").innerHTML += "<br>" + dataURL ;
                       };
                   
                   /* var file4 = document.getElementById("file").files[0] ;
                   var reader4 = new FileReader();
                       reader4.onload = function(e) {
                       document.getElementById("div2").innerHTML += "<br>" + e.target.result ;
                       };
                       reader4.readAsDataURL(file4); */
                    
                    var file41 = document.getElementById("file").files[0] ;
                    var reader41 = new FileReader();
                       reader41.onload = function(e42) {
                       var dataBuf4 = e42.target.result; var data4 = new Uint8Array(dataBuf4)
                       var view41 = new Uint8Array(e42.target.result); 
                       document.getElementById("div2").innerHTML += "<br>" + view41 ;
                       for (let i=0; i<256; i++) {
                         document.getElementById("div3").innerHTML += "<br>" + i + ": " + view41[i] ;
                       }
                     // };
                      // reader41.readAsArrayBuffer(file41);
       
                      var imageData4 = ctx4.createImageData(32, 32); 
                         var i, j, k;
                      for ( i = 32*4*32-32; i>0; i -=32*4 ) { j=0;
                          for ( j = 0; j < 32*4; j += 4) {
                            for ( k = 0; k < 32*4*32; k +=4) {
                            imageData4.data[k + 0] = data4[i+j + data4[10]+2] ;  // 255;    // R value
                            imageData4.data[k + 1] = data4[i+j + data4[10]+1] ;  // 0;  // G value
                            imageData4.data[k + 2] = data4[i+j + data4[10]] ;  // 0;    // B value
                            imageData4.data[k + 3] = data4[i+j + data4[10]+3] ;  //  255;  // A value
                            }
                          }
                       }
                      ctx4.putImageData(imageData4, 310, 10);
                   
                    };
                   reader41.readAsArrayBuffer(file41);
            }
       
  </script>
  
  
        <script>
              alert('52');
            function abc5() {
                var file = document.getElementById("file").files[0] ;
                var reader = new FileReader();
                 reader.onload = function(e) {
                        var dataBuf = e.target.result;
                        var data = new Uint8Array(dataBuf);
                        var buffer = e.target.result;
                        var view = new Uint8Array(buffer); 
                       document.getElementById("div2").innerHTML += "<br>" + view ;
                       for (let i=0; i<256; i++) {
                         document.getElementById("div3").innerHTML += "<br>" + i + ": " + view[i] ;
                       } 
                      var bufferI = new ArrayBuffer(4);
                      var viewI = new DataView(bufferI);
                      
                      var sb = data[2]; // size
                      var bgn = data[10]; // start of data byte
                      var sd = 256*(data[15]) + (data[14]); // size
                      viewI.setUint8(0, data[19]);
                      viewI.setUint8(1, data[18]);
                      var w = viewI.getUint16(0);
                      document.getElementById("div2").innerHTML += "<br>" + w ;
                      viewI.setUint8(0, data[23]);  
                      viewI.setUint8(1, data[22]);
                      var h = viewI.getUint16(0);
                      document.getElementById("div2").innerHTML += "<br>" + h ;
                      var bpp = data[28]; var b = (data[28])/8;
                   
                      var cvs = document.getElementById("canvas1");
                      var ctx = cvs.getContext("2d"); 
                      var imageData = ctx.createImageData(w, h); 
                     
                      if (b==3) {
                      var  i, j, k=0;
                      for ( i = w*b*h-w*b; i>0; i -=w*b ) {
                          for ( j = 0; j < w*b; j += b ) {
                            
                            imageData.data[k + 0] = data[bgn+2+i+j];  // 255;    // R value
                            imageData.data[k + 1] = data[bgn+1+i+j]  // 0;  // G value
                            imageData.data[k + 2] = data[bgn+0+i+j] ;  // 0;    // B value
                            imageData.data[k + 3] = 255; // data[bgn+3+i+j] ;  //  255;  // A value
                            k += b+1;
                           }
                          }
                        }
                   
                      else if (b==4) {
                      var i, j, k=0;
                      for ( i = w*b*h-w*b; i>0; i -=w*b ) {
                          for ( j = 0; j < w*b; j += b) {
                            
                            imageData.data[k + 0] = data[bgn+2+i+j];  // 255;    // R value
                            imageData.data[k + 1] = data[bgn+1+i+j]  // 0;  // G value
                            imageData.data[k + 2] = data[bgn+0+i+j] ;  // 0;    // B value
                            imageData.data[k + 3] = data[bgn+3+i+j] ;  //  255;  // A value
                            k += b;
                           }
                          }
                        }
                   
                         ctx.putImageData(imageData, 310, 10);
                         document.getElementById("div2").innerHTML += "<br>" + imageData.data ;
                    };
                   reader.readAsArrayBuffer(file);
            }
          
          </script>
  
  
          <script>
         alert('storage');
         document.getElementById("div1").innerHTML += "<br>" + 'storage' ;
         localStorage.setItem('bgcolor', 'abc');
         document.getElementById("div1").innerHTML += "<br>" + 'abc' ;
         var storage1 = localStorage.getItem('bgcolor');
         document.getElementById("div1").innerHTML += "<br>" + storage1 ;
            
         </script>
  
  
  
  
  
       <script>
  

  
  
  (function () {
    // IndexedDB
    var indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.OIndexedDB || window.msIndexedDB,
        IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.OIDBTransaction || window.msIDBTransaction,
        dbVersion = 1.0;

    // Create/open database
    var request = indexedDB.open("elephantFiles", dbVersion),
        db,
        createObjectStore = function (dataBase) {
            // Create an objectStore
            console.log("Creating objectStore")
            dataBase.createObjectStore("elephants");
        },

        getImageFile = function () {
            // Create XHR
            var xhr = new XMLHttpRequest(),
                blob;

            xhr.open("GET", "elephant.png", true);
            // Set the responseType to blob
            xhr.responseType = "blob";

            xhr.addEventListener("load", function () {
                if (xhr.status === 200) {
                    console.log("Image retrieved");
                    
                    // Blob as response
                    blob = xhr.response;
                    console.log("Blob:" + blob);

                    // Put the received blob into IndexedDB
                    putElephantInDb(blob);
                }
            }, false);
            // Send XHR
            xhr.send();
        },

        putElephantInDb = function (blob) {
            console.log("Putting elephants in IndexedDB");

            // Open a transaction to the database
            var transaction = db.transaction(["elephants"], IDBTransaction.READ_WRITE);

            // Put the blob into the dabase
            var put = transaction.objectStore("elephants").put(blob, "image");

            // Retrieve the file that was just stored
            transaction.objectStore("elephants").get("image").onsuccess = function (event) {
                var imgFile = event.target.result;
                console.log("Got elephant!" + imgFile);

                // Get window.URL object
                var URL = window.URL || window.webkitURL;

                // Create and revoke ObjectURL
                var imgURL = URL.createObjectURL(imgFile);

                // Set img src to ObjectURL
                var imgElephant = document.getElementById("elephant");
                imgElephant.setAttribute("src", imgURL);

                // Revoking ObjectURL
                URL.revokeObjectURL(imgURL);
            };
        };

    request.onerror = function (event) {
        console.log("Error creating/accessing IndexedDB database");
    };

    request.onsuccess = function (event) {
        console.log("Success creating/accessing IndexedDB database");
        db = request.result;

        db.onerror = function (event) {
            console.log("Error creating/accessing IndexedDB database");
        };
        
        // Interim solution for Google Chrome to create an objectStore. Will be deprecated
        if (db.setVersion) {
            if (db.version != dbVersion) {
                var setVersion = db.setVersion(dbVersion);
                setVersion.onsuccess = function () {
                    createObjectStore(db);
                    getImageFile();
                };
            }
            else {
                getImageFile();
            }
        }
        else {
            getImageFile();
        }
    }
    
    // For future use. Currently only in latest Firefox versions
    request.onupgradeneeded = function (event) {
        createObjectStore(event.target.result);
    };
})();
  
  
         
       </script>
  
       <script>
  
         var x = document.createElement("INPUT");
         x.setAttribute("type", "text");
         x.setAttribute("value", "Hello World!");
         x.setAttribute("placeholder", "Text");
         x.setAttribute("id", "cinField");
         document.getElementById("div2").appendChild(x);
         var y =  document.getElementById("cinField").value;
         document.getElementById("div2").innerHTML += "<br>" + y ;
         
         
       </script>

       <script>
       
        var str = 'Hello World';
        document.getElementById("div2").innerHTML += "<br>" + str[0] ;
         
        var str1 = 'Hello, Word' ;
        var buf1 = Buffer.from(str1, 'utf8');

        var str2 = buf1.toString();
        var buf2 = Buffer.from(str2, 'utf8');
         
        document.getElementById("div2").innerHTML += "<br>" + str1 + " " + buf1 ;
        document.getElementById("div2").innerHTML += "<br>" + str2 + " " + buf2 ;
         
       </script>

       <script>
         
       </script>
         
         
</body>
</html>
